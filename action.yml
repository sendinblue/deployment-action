name: Deployment Action
description: Trigger deployment event for a GitHub repository

# https://docs.github.com/en/rest/reference/repos#create-a-deployment
inputs:
  token:
    description: GitHub token to access the Deployments API (usually github.token).
    required: true
  repository:
    description: Full repository name (e.g. owner/repo).
    required: true
  ref:
    description: Branch/tag (version) for which the deployment will be triggered.
    required: true
  environment:
    description: Name for the target deployment environment (e.g., production, staging, qa).
    default: production
    required: false
  task:
    description: Specifies a task to execute (e.g., deploy or deploy:migrations).
    default: deploy
    required: false
  required-contexts:
    description: The status contexts to verify against commit status checks.
    default: 'null'
    required: false
  payload:
    description: Component (Kustomize overlays folder name inside envrionment folder)
    required: false

outputs:
  deployment-id:
    description: ID of the new deployment.

runs:
  using: node12
  main: index.js
